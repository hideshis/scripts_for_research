<!DOCTYPE html>
<html>
<head>
  <title>BeanUtil.java</title>
  <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
  <link rel='stylesheet' type='text/css' href='../../../coverage.css'/>
  <link rel='shortcut icon' type='image/png' href='../../../logo.png'/>
  <script type='text/javascript' src='../../../coverage.js'></script>
  <script type='text/javascript' src='../../../prettify.js'></script>
</head>
<body onload='prettyPrint()'>
  <table cellpadding='0' cellspacing='1'>
    <caption>activejpa-core/src/main/java/org/activejpa/util/BeanUtil.java</caption>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>/**
 * 
 */</div><span>/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>4</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>package org.activejpa.util;</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td><pre class='imports prettyprint' onclick='showHideLines(this)'><div>import static org.activejpa.util.PropertyUtil.getCollectionElementType;

import java.lang.reflect.Method;
import java.lang.reflect.Type;
import java.util.HashMap;
import java.util.Map;
import java.util.Map.Entry;
import java.util.Set;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
</div><span>import ...</span></pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>/**
 * @author ganeshs
 *
 */</div><span>/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>22</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l22s0'>public class BeanUtil {</pre>
        <ol style='display:none'></ol>
      </td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>24</td><td class='count'>1</td>
      <td><pre class='prettyprint covered cp' onclick='showHide(this)' id='l24s0'>	private static final Logger logger = LoggerFactory.getLogger(BeanUtil.class);</pre>
        <ol style='display:none'>
          <li>org.activejpa.util.BeanUtilTest#shouldLoadBean: 40</li>
        </ol>
      </td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * &lt;p>Utility method that will be used to load bean from a map output of json de-serialization&lt;/p>
	 *  
	 * @param model
	 * @param attributes
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>32</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	@SuppressWarnings({ "rawtypes", "unchecked" }) </pre></td>
    </tr>
    <tr>
      <td class='line'>33</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public static void load(Object model, Map&lt;String, Object> attributes) {</pre></td>
    </tr>
    <tr>
      <td class='line'>34</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>		<span id='l34s0' title='Executions: 0' class='uncovered'>for (Entry&lt;String, Object> entry</span> : <span id='l34s1' title='Executions: 0' class='uncovered'>attributes.entrySet())</span> {</pre>
        <ol style='display:none'></ol>
        <ol style='display:none'></ol>
      </td>
    </tr>
    <tr>
      <td class='line'>35</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			try {</pre></td>
    </tr>
    <tr>
      <td class='line'>36</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l36s0'>				Method method = PropertyUtil.getReadMethod(model, entry.getKey());</pre>
        <ol style='display:none'></ol>
      </td>
    </tr>
    <tr>
      <td class='line'>37</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>				<span id='l37s0' title='Executions: 0' class='uncovered'>if (method == null)</span> {</pre>
        <ol style='display:none'></ol>
      </td>
    </tr>
    <tr>
      <td class='line'>38</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l38s0'>					continue;</pre>
        <ol style='display:none'></ol>
      </td>
    </tr>
    <tr>
      <td class='line'>39</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>				}</pre></td>
    </tr>
    <tr>
      <td class='line'>40</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>				<span id='l40s0' title='Executions: 0' class='uncovered'>Type propertyType = method.getGenericReturnType() != null</span> ? <span id='l40s1' title='Executions: 0' class='uncovered'>method.getGenericReturnType()</span> : <span id='l40s2' title='Executions: 0' class='uncovered'>method.getReturnType();</span></pre>
        <ol style='display:none'></ol>
        <ol style='display:none'></ol>
        <ol style='display:none'></ol>
      </td>
    </tr>
    <tr>
      <td class='line'>41</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l41s0'>				Object property = PropertyUtil.getProperty(model, entry.getKey());</pre>
        <ol style='display:none'></ol>
      </td>
    </tr>
    <tr>
      <td class='line'>42</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>				<span id='l42s0' title='Executions: 0' class='uncovered'>if (PropertyUtil.isSimpleProperty(entry.getValue().getClass()))</span> {</pre>
        <ol style='display:none'></ol>
      </td>
    </tr>
    <tr>
      <td class='line'>43</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l43s0'>					PropertyUtil.setProperty(model, entry.getKey(), entry.getValue());</pre>
        <ol style='display:none'></ol>
      </td>
    </tr>
    <tr>
      <td class='line'>44</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>				<span id='l44s0' title='Executions: 0' class='uncovered'>}</span> else if (PropertyUtil.isCollectionProperty(propertyType, false)) {</pre>
        <ol style='display:none'></ol>
      </td>
    </tr>
    <tr>
      <td class='line'>45</td><td>&nbsp;</td>
      <td><pre class='comment'>					// TODO Need to figure out a way to populate collection</pre></td>
    </tr>
    <tr>
      <td class='line'>46</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>				<span id='l46s0' title='Executions: 0' class='uncovered'>}</span> else if (PropertyUtil.isMapProperty(propertyType)) {</pre>
        <ol style='display:none'></ol>
      </td>
    </tr>
    <tr>
      <td class='line'>47</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>					<span id='l47s0' title='Executions: 0' class='uncovered'>if (property == null)</span> {</pre>
        <ol style='display:none'></ol>
      </td>
    </tr>
    <tr>
      <td class='line'>48</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l48s0'>						property = new HashMap();</pre>
        <ol style='display:none'></ol>
      </td>
    </tr>
    <tr>
      <td class='line'>49</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>					}</pre></td>
    </tr>
    <tr>
      <td class='line'>50</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l50s0'>					loadMap((Map)property, (Map)attributes.get(entry.getKey()), getCollectionElementType(propertyType));</pre>
        <ol style='display:none'></ol>
      </td>
    </tr>
    <tr>
      <td class='line'>51</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l51s0'>					PropertyUtil.setProperty(model, entry.getKey(), property);</pre>
        <ol style='display:none'></ol>
      </td>
    </tr>
    <tr>
      <td class='line'>52</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>				} else {</pre></td>
    </tr>
    <tr>
      <td class='line'>53</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>					<span id='l53s0' title='Executions: 0' class='uncovered'>if (property == null</span> && <span id='l53s1' title='Executions: 0' class='uncovered'>propertyType instanceof Class)</span> {</pre>
        <ol style='display:none'></ol>
        <ol style='display:none'></ol>
      </td>
    </tr>
    <tr>
      <td class='line'>54</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l54s0'>						property = ((Class)propertyType).newInstance();</pre>
        <ol style='display:none'></ol>
      </td>
    </tr>
    <tr>
      <td class='line'>55</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>					}</pre></td>
    </tr>
    <tr>
      <td class='line'>56</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l56s0'>					load(property, (Map&lt;String, Object>) entry.getValue());</pre>
        <ol style='display:none'></ol>
      </td>
    </tr>
    <tr>
      <td class='line'>57</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l57s0'>					PropertyUtil.setProperty(model, entry.getKey(), property);</pre>
        <ol style='display:none'></ol>
      </td>
    </tr>
    <tr>
      <td class='line'>58</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>				}</pre></td>
    </tr>
    <tr>
      <td class='line'>59</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l59s0'>			} catch (Exception e) {</pre>
        <ol style='display:none'></ol>
      </td>
    </tr>
    <tr>
      <td class='line'>60</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l60s0'>				logger.warn("Failed while loading the attributes to the bean", e);</pre>
        <ol style='display:none'></ol>
      </td>
    </tr>
    <tr>
      <td class='line'>61</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l61s0'>			}</pre>
        <ol style='display:none'></ol>
      </td>
    </tr>
    <tr>
      <td class='line'>62</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l62s0'>		}</pre>
        <ol style='display:none'></ol>
      </td>
    </tr>
    <tr>
      <td class='line'>63</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l63s0'>	}</pre>
        <ol style='display:none'></ol>
      </td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>65</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	@SuppressWarnings({ "rawtypes", "unchecked" }) </pre></td>
    </tr>
    <tr>
      <td class='line'>66</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	private static void loadMap(Map map, Map attributes, Class&lt;?> elementType) throws Exception {</pre></td>
    </tr>
    <tr>
      <td class='line'>67</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>		<span id='l67s0' title='Executions: 0' class='uncovered'>for (Entry entry</span> : (<span id='l67s1' title='Executions: 0' class='uncovered'>Set&lt;Entry>)</span> attributes.entrySet()) {</pre>
        <ol style='display:none'></ol>
        <ol style='display:none'></ol>
      </td>
    </tr>
    <tr>
      <td class='line'>68</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>			<span id='l68s0' title='Executions: 0' class='uncovered'>if (PropertyUtil.isSimpleValueType(elementType))</span> {</pre>
        <ol style='display:none'></ol>
      </td>
    </tr>
    <tr>
      <td class='line'>69</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l69s0'>				map.put(entry.getKey(), ConvertUtil.convert(entry.getValue(), elementType));</pre>
        <ol style='display:none'></ol>
      </td>
    </tr>
    <tr>
      <td class='line'>70</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			} else {</pre></td>
    </tr>
    <tr>
      <td class='line'>71</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l71s0'>				Object value = map.get(entry.getKey());</pre>
        <ol style='display:none'></ol>
      </td>
    </tr>
    <tr>
      <td class='line'>72</td><td class='count'>0</td>
      <td><pre class='prettyprint jmp'>				<span id='l72s0' title='Executions: 0' class='uncovered'>if (value == null)</span> {</pre>
        <ol style='display:none'></ol>
      </td>
    </tr>
    <tr>
      <td class='line'>73</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l73s0'>					value = elementType.newInstance();</pre>
        <ol style='display:none'></ol>
      </td>
    </tr>
    <tr>
      <td class='line'>74</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>				}</pre></td>
    </tr>
    <tr>
      <td class='line'>75</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l75s0'>				load(value, (Map)entry.getValue());</pre>
        <ol style='display:none'></ol>
      </td>
    </tr>
    <tr>
      <td class='line'>76</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l76s0'>				map.put(entry.getKey(), value);</pre>
        <ol style='display:none'></ol>
      </td>
    </tr>
    <tr>
      <td class='line'>77</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			}</pre></td>
    </tr>
    <tr>
      <td class='line'>78</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l78s0'>		}</pre>
        <ol style='display:none'></ol>
      </td>
    </tr>
    <tr>
      <td class='line'>79</td><td class='count'>0</td>
      <td><pre class='prettyprint uncovered' id='l79s0'>	}</pre>
        <ol style='display:none'></ol>
      </td>
    </tr>
    <tr>
      <td class='line'>80</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>}</pre></td>
    </tr>
  </table>
</body>
</html>
